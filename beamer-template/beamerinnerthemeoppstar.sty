% Oppstar Beamer Inner Theme
% Defines the layout and structure of slide content
\ProvidesPackage{beamerinnerthemeoppstar}[2025/01/01 Oppstar Beamer Inner Theme]

\mode<presentation>

% Title page layout - completely centered using full paper width
\defbeamertemplate*{title page}{oppstar}[1][]
{
  \vbox{}
  \vfill
  \begingroup
    \centering
    \begin{beamercolorbox}[wd=\paperwidth,sep=8pt,center,#1]{title}
      \usebeamerfont{title}\inserttitle\par%
      \ifx\insertsubtitle\@empty%
      \else%
        \vskip0.25em%
        {\usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle\par}%
      \fi%
    \end{beamercolorbox}%
    \vskip1em\par
    \begin{beamercolorbox}[wd=\paperwidth,sep=8pt,center,#1]{author}
      \usebeamerfont{author}\insertauthor
    \end{beamercolorbox}
    \begin{beamercolorbox}[wd=\paperwidth,sep=8pt,center,#1]{institute}
      \usebeamerfont{institute}\insertinstitute
    \end{beamercolorbox}
    \begin{beamercolorbox}[wd=\paperwidth,sep=8pt,center,#1]{date}
      \usebeamerfont{date}\insertdate
    \end{beamercolorbox}\vskip0.5em
    {\usebeamercolor[fg]{titlegraphic}\inserttitlegraphic\par}
  \endgroup
  \vfill
}

% Frame title layout - completely centered
\defbeamertemplate*{frametitle}{oppstar}[1][]
{
  \vskip0.2cm
  \begin{beamercolorbox}[wd=\paperwidth,ht=0.8cm,dp=0.3cm,center]{frametitle}
    \usebeamerfont{frametitle}\insertframetitle%
    \ifx\insertframesubtitle\@empty%
    \else%
    \par{\usebeamerfont{framesubtitle}\usebeamercolor[fg]{framesubtitle}\insertframesubtitle}%
    \fi%
  \end{beamercolorbox}
}

% Item layout - clean bullets
\defbeamertemplate*{itemize item}{oppstar}
{
  \small\raise1.25pt\hbox{\donotcoloroutermaths$\blacktriangleright$}
}

\defbeamertemplate*{itemize subitem}{oppstar}
{
  \tiny\raise1.5pt\hbox{\donotcoloroutermaths$\blacktriangleright$}
}

\defbeamertemplate*{itemize subsubitem}{oppstar}
{
  \tiny\raise1.5pt\hbox{\donotcoloroutermaths$\blacktriangleright$}
}

% Enumerate items
\defbeamertemplate*{enumerate item}{oppstar}
{
  \insertenumlabel.
}

\defbeamertemplate*{enumerate subitem}{oppstar}
{
  \insertsubenumlabel.
}

\defbeamertemplate*{enumerate subsubitem}{oppstar}
{
  \insertsubsubenumlabel.
}

% Block environments
\defbeamertemplate*{block begin}{oppstar}
{
  \par\vskip\medskipamount%
  \begin{beamercolorbox}[colsep*=.75ex]{block title}
    \usebeamerfont*{block title}\insertblocktitle%
  \end{beamercolorbox}%
  {\parskip0pt\par}%
  \ifbeamercolorempty[bg]{block title}
  {}
  {\ifbeamercolorempty[bg]{block body}{}{\nointerlineskip\vskip-0.5pt}}%
  \usebeamerfont{block body}%
  \begin{beamercolorbox}[colsep*=.75ex,vmode]{block body}%
    \ifbeamercolorempty[bg]{block body}{\vskip-.25ex}{\vskip-.75ex}\vbox{}%
}

\defbeamertemplate*{block end}{oppstar}
{
  \end{beamercolorbox}\vskip\smallskipamount
}

% Alert block
\defbeamertemplate*{block alerted begin}{oppstar}
{
  \par\vskip\medskipamount%
  \begin{beamercolorbox}[colsep*=.75ex]{block title alerted}
    \usebeamerfont*{block title alerted}\insertblocktitle%
  \end{beamercolorbox}%
  {\parskip0pt\par}%
  \ifbeamercolorempty[bg]{block title alerted}
  {}
  {\ifbeamercolorempty[bg]{block body alerted}{}{\nointerlineskip\vskip-0.5pt}}%
  \usebeamerfont{block body alerted}%
  \begin{beamercolorbox}[colsep*=.75ex,vmode]{block body alerted}%
    \ifbeamercolorempty[bg]{block body alerted}{\vskip-.25ex}{\vskip-.75ex}\vbox{}%
}

\defbeamertemplate*{block alerted end}{oppstar}
{
  \end{beamercolorbox}\vskip\smallskipamount
}

% Example block
\defbeamertemplate*{block example begin}{oppstar}
{
  \par\vskip\medskipamount%
  \begin{beamercolorbox}[colsep*=.75ex]{block title example}
    \usebeamerfont*{block title example}\insertblocktitle%
  \end{beamercolorbox}%
  {\parskip0pt\par}%
  \ifbeamercolorempty[bg]{block title example}
  {}
  {\ifbeamercolorempty[bg]{block body example}{}{\nointerlineskip\vskip-0.5pt}}%
  \usebeamerfont{block body example}%
  \begin{beamercolorbox}[colsep*=.75ex,vmode]{block body example}%
    \ifbeamercolorempty[bg]{block body example}{\vskip-.25ex}{\vskip-.75ex}\vbox{}%
}

\defbeamertemplate*{block example end}{oppstar}
{
  \end{beamercolorbox}\vskip\smallskipamount
}

% Table of contents
\defbeamertemplate*{section in toc}{oppstar}
{
  \inserttocsectionnumber.~\inserttocsection
}

\defbeamertemplate*{subsection in toc}{oppstar}
{
  \hspace{1.2em}\inserttocsectionnumber.\inserttocsubsectionnumber~\inserttocsubsection\par
}

% Bibliography
\defbeamertemplate*{bibliography item}{oppstar}
{
  \insertbiblabel
}

\mode<all>

